(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9721:function(t,e,n){Promise.resolve().then(n.bind(n,5171))},5171:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l}});var s=n(7437),i=n(2265);class o{static fromPoint(t){return new o(t.x,t.y)}add(t){this.x+=t.x,this.y+=t.y}getDistanceToPoint(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return t.x==this.x&&t.y==this.y}constructor(t,e){this.x=t,this.y=e}}o.zero=new o(0,0);class r{CalculateCenter(){var t=0,e=0,n=null,s=null,i=null,r=null;for(let o=0;o<this.points.length;o++)t+=this.points[o].x,e+=this.points[o].y,0==o&&(n=this.points[o].x,s=this.points[o].y,i=this.points[o].x,r=this.points[o].y),null!=n&&this.points[o].x>n&&(n=this.points[o].x),null!=s&&this.points[o].y>s&&(s=this.points[o].y),null!=i&&this.points[o].x<i&&(i=this.points[o].x),null!=r&&this.points[o].y<r&&(r=this.points[o].y);this.center=new o(t/this.points.length,e/this.points.length),null!=n&&null!=s&&null!=i&&null!=r?(this.topRight=new o(n,s),this.bottomLeft=new o(i,r)):(this.topRight=o.fromPoint(this.center),this.bottomLeft=o.fromPoint(this.center)),this.width=Math.abs(this.bottomLeft.x)+Math.abs(this.topRight.x),this.height=Math.abs(this.bottomLeft.y)+Math.abs(this.topRight.y)}hasSharedPoints(t,e){var n=0;for(let s=0;s<t.getPoints().length;s++)for(let i=0;i<this.points.length;i++)if(t.getPoints()[s].equals(this.points[i])&&++n>=e)return!0;return!1}getPoints(){return this.points}getDrawPoints(){return 0==this.points.length?[]:[...this.points,this.points[0]]}addPoint(t){return this.points.push(t),this}setLast(t){return this.points[this.points.length-1]=t,this}constructor(t){this.center=o.zero,this.topRight=o.zero,this.bottomLeft=o.zero,this.width=0,this.height=0,this.points=t,this.CalculateCenter()}}function l(){let[t,e]=(0,i.useState)([]),[n,l]=(0,i.useState)(!1),[h,a]=(0,i.useState)(null),[u,c]=(0,i.useState)(new o(0,0)),[p,f]=(0,i.useState)(new o(0,0)),[x,y]=(0,i.useState)(!1),[g,d]=(0,i.useState)(1),w=t=>{console.log(g),t.deltaY>0?d(Math.max(g-1e-4*t.deltaY,.1)):d(g+-(1e-4*t.deltaY))},b=e=>{for(let n=0;n<t.length;n++)if(t[n]===h){t[n]=e;break}a(new r(e.getPoints()))},m=e=>{a(t[e])},v=(0,i.useRef)(null);return(0,s.jsxs)("main",{className:"flex flex-col items-center justify-between p-24",style:{height:"100vh"},children:[(0,s.jsx)("svg",{ref:v,onMouseDown:t=>{let e=t.currentTarget.getBoundingClientRect();var n=new o(t.clientX-e.left,t.clientY-e.top);0===t.button?null!=h&&(l(!0),b(h.addPoint(new o(n.x/g-p.x,n.y/g-p.y)))):1===t.button&&(c(n),y(!0))},onMouseMove:t=>{let e=t.currentTarget.getBoundingClientRect(),s=new o(t.clientX-e.left,t.clientY-e.top);if(n){if(!h)return;b(h.setLast(new o(s.x/g-p.x,s.y/g-p.y)))}if(x){var i=s.x-u.x,r=s.y-u.y;f(new o(p.x+i/g,p.y+r/g)),c(new o(s.x,s.y))}},onMouseUp:t=>{0===t.button?l(!1):1===t.button&&(c(new o(0,0)),y(!1))},onWheel:t=>w(t),width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,background:"lightgrey",zIndex:1},children:t.map((t,e)=>(0,s.jsx)("polyline",{points:t.getDrawPoints().map(t=>"".concat((t.x+p.x)*g,",").concat((t.y+p.y)*g)).join(" "),fill:"none",stroke:"black",strokeWidth:5*g},e))}),(0,s.jsxs)("div",{className:"absolute top-4 left-4 z-2",style:{zIndex:2},children:[(0,s.jsx)("button",{onClick:()=>{var n=new r([]);e([...t,n]),a(n)},className:"bg-blue-500 text-white px-4 py-2",children:"New Shape"}),(0,s.jsx)("button",{onClick:()=>{if(v.current){let e=new XMLSerializer().serializeToString(v.current),n="data:image/svg+xml;base64,".concat(btoa(e));console.log("GO");var t=document.createElement("a");t.download="canvas.svg",t.href=n,t.click()}},className:"bg-green-500 text-white px-4 py-2 ml-4",children:"Export Canvas"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{children:"Shapes:"}),(0,s.jsx)("ul",{children:t.map((t,e)=>(0,s.jsx)("button",{onClick:()=>m(e),className:"bg-gray-300 text-gray-700 px-2 py-1 m-1 rounded",children:"Shape ".concat(e+1)},e))})]})]})]})}},622:function(t,e,n){"use strict";var s=n(2265),i=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,n){var s,h={},a=null,u=null;for(s in void 0!==n&&(a=""+n),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,s)&&!l.hasOwnProperty(s)&&(h[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps)void 0===h[s]&&(h[s]=e[s]);return{$$typeof:i,type:t,key:a,ref:u,props:h,_owner:r.current}}e.jsx=h,e.jsxs=h},7437:function(t,e,n){"use strict";t.exports=n(622)}},function(t){t.O(0,[971,938,744],function(){return t(t.s=9721)}),_N_E=t.O()}]);